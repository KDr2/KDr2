# -*- mode: org; mode: auto-fill -*-
#+TITLE: Code: site.js
#+AUTHOR: KDr2

#+BEGIN_SRC javascript :tangle yes
/*
 * Extracted from content/mist/site.js.lit.org, do NOT edit this file.
 */
#+END_SRC

Init site name, domain, and search box
#+BEGIN_SRC javascript :tangle yes
  function init_site() {
      var url = window.location.href;
      var domain = url.replace(/^\w+:\/\//, "").replace(/\/.*$/gi,"").toLowerCase();
      var page = url.replace(/^\w+:\/\/.*?\//i,"").replace(/#.*$/gi,"");
      var site_name = "[K]";
      document.getElementById("site-name").innerHTML = site_name;
      document.getElementById("sitesearch").value = domain;
  }
#+END_SRC

Init google analytics code
#+BEGIN_SRC javascript :tangle yes
#+END_SRC

Register document ready callback:
#+BEGIN_SRC javascript :tangle yes
  document.addEventListener('DOMContentLoaded', function() {
      init_site();
  }, false);
#+END_SRC
